components:
  schemas:
   Bill:
      type: object
      properties:
        id:
          type: integer
          format: int64
        company:
          $ref: '#/components/schemas/Company'
        bank:
          $ref: '#/components/schemas/Bank'
        amount:
          type: integer
          description: 支払金額（円）
          minimum: 1
        payment_limit:
          type: integer
          description: 振込上限金額（円）
          minimum: 1
        payment_date:
          type: string
          format: date
          description: 実際の振込予定日
        payment_period:
          type: string
          enum: [current_month_end, next_month_15, next_month_20, next_month_end]
          description: 振込期限区分
        is_paid:
          type: boolean
          description: 支払済みフラグ
        paid_at:
          type: string
          format: date-time
          nullable: true
          description: 支払完了日時
        description:
          type: string
          nullable: true
          description: 備考
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - company
        - bank
        - amount
        - payment_limit
        - payment_date
        - payment_period
        - is_paid

   CreateBillRequest:
      type: object
      properties:
        company_id:
          type: integer
          format: int64
        bank_id:
          type: integer
          format: int64
        amount:
          type: integer
          description: 支払金額（円）
          minimum: 1
        payment_limit:
          type: integer
          description: 振込上限金額（円）
          minimum: 1
        payment_period:
          type: string
          enum: [current_month_end, next_month_15, next_month_20, next_month_end]
          description: 振込期限区分（上限超過時は自動でnext_month_15に調整）
        description:
          type: string
          nullable: true
      required:
        - company_id
        - bank_id
        - amount
        - payment_limit
        - payment_period

   UpdateBillRequest:
      type: object
      properties:
        company_id:
          type: integer
          format: int64
        bank_id:
          type: integer
          format: int64
        amount:
          type: integer
          minimum: 1
        payment_limit:
          type: integer
          minimum: 1
        payment_period:
          type: string
          enum: [current_month_end, next_month_15, next_month_20, next_month_end]
        description:
          type: string
          nullable: true
      required:
        - company_id
        - bank_id
        - amount
        - payment_limit
        - payment_period

   UpdatePaymentStatusRequest:
      type: object
      properties:
        is_paid:
          type: boolean
      required:
        - is_paid

   BillValidationResponse:
      type: object
      properties:
        bill:
          $ref: '#/components/schemas/Bill'
        warnings:
          type: array
          items:
            type: string
          description: 警告メッセージ（例：上限超過による期限自動変更）
        adjusted:
          type: boolean
          description: 自動調整が行われたかどうか
      required:
        - bill
        - warnings
        - adjusted

   BillListResponse:
      type: object
      properties:
        bills:
          type: array
          items:
            $ref: '#/components/schemas/Bill'
        total:
          type: integer
          description: 総件数
      required:
        - bills
        - total

   BillSummaryGroup:
      type: object
      properties:
        payment_period:
          type: string
          enum: [current_month_end, next_month_15, next_month_20, next_month_end]
        payment_period_name:
          type: string
          description: 表示用期限名（例：「当月末 振込分」）
        bills:
          type: array
          items:
            $ref: '#/components/schemas/Bill'
        total_amount:
          type: integer
          description: 合計金額
        paid_count:
          type: integer
          description: 支払済み件数
        unpaid_count:
          type: integer
          description: 未払い件数
      required:
        - payment_period
        - payment_period_name
        - bills
        - total_amount
        - paid_count
        - unpaid_count

   BillSummaryResponse:
      type: object
      properties:
        summary:
          type: array
          items:
            $ref: '#/components/schemas/BillSummaryGroup'
        grand_total:
          type: integer
          description: 全体合計金額
      required:
        - summary
        - grand_total
